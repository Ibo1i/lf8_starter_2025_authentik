### ============================================
### JWT Token von Keycloak holen (Story 4.1)
### ============================================
### WICHTIG: Führe diesen Request ZUERST aus, um den Token zu bekommen!
### Der access_token wird automatisch in der Variable {{auth_token}} gespeichert.

# @name getToken
POST http://localhost:9090/realms/hitec-realm/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id=project-management-service
&client_secret=aw6wMz5ZBRSyMHjS0y26SV07DDNNhTXa
&grant_type=client_credentials
&scope=openid

> {%
    client.global.set("auth_token", response.body.access_token);
    client.log("✅ Token gespeichert! Gültig für: " + response.body.expires_in + " Sekunden");
%}

### ============================================
### PROJEKT-MANAGEMENT ENDPOINTS (mit JWT)
### ============================================

### Neues Projekt erstellen
POST http://localhost:8080/projects
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "designation": "Neues Projekt",
  "responsibleEmployeeId": 1,
  "customerId": 1,
  "customerContactPerson": "Max Mustermann",
  "comment": "Dies ist ein neues Projekt",
  "startDate": "2025-11-10",
  "plannedEndDate": "2026-03-31"
}

### Alle Projekte auflisten
GET http://localhost:8080/projects
Authorization: Bearer {{auth_token}}

### Projekt abrufen (by ID)
GET http://localhost:8080/projects/1
Authorization: Bearer {{auth_token}}

### Projekt aktualisieren
PUT http://localhost:8080/projects/1
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "designation": "Aktualisiertes Projekt",
  "responsibleEmployeeId": 2,
  "customerId": 2,
  "customerContactPerson": "Neue Person",
  "comment": "Aktualisierter Kommentar",
  "startDate": "2025-12-01",
  "plannedEndDate": "2026-06-30"
}

### Projekt löschen
DELETE http://localhost:8080/projects/1
Authorization: Bearer {{auth_token}}


### Mitarbeiter einem Projekt zuweisen
POST http://localhost:8080/projects/1/employees
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "employeeId": 6,
  "qualification": "Java Senior Developer"
}

### Mitarbeiter von einem Projekt entfernen
DELETE http://localhost:8080/projects/1/employees/6
Authorization: Bearer {{auth_token}}

### Mitarbeiterliste eines Projekts abrufen
GET http://localhost:8080/projects/1/employees
Authorization: Bearer {{auth_token}}

### Projekte eines Mitarbeiters abrufen
GET http://localhost:8080/employees/1/projects
Authorization: Bearer {{auth_token}}